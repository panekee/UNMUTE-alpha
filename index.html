<div id="player-container">
  <video id="video-player" controls style="display:none; width:100%; border-radius:8px; background:black;">
    <source src="" type="video/mp4" />
    Tu navegador no soporta video HTML5.
  </video>
  <iframe id="iframe-player" style="display:none; width:100%; height:400px; border:none; border-radius:8px;" allowfullscreen></iframe>
  <div id="current-title" style="margin-top:8px; font-weight:bold;"></div>
</div>

<script>
  const videos = [
    {
      title: "princesita se aprovechó de él y me llamó para contarlo TODO. - Sin Censura",
      url: "https://www.youtube.com/embed/XVPM51k3dwg",  // Usar embed url
      thumbnail: "https://img.youtube.com/vi/XVPM51k3dwg/hqdefault.jpg",
      type: "youtube"
    },
    {
      title: "Elephants Dream - Contenido Libre",
      url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",
      thumbnail: "https://orange.blender.org/wp-content/themes/orange/images/media/gallery/ed_head.jpg",
      type: "video"
    },
    {
      title: "Sintel - Expresión Total",
      url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4",
      thumbnail: "https://durian.blender.org/wp-content/uploads/2010/05/sintel_posters_15.jpg",
      type: "video"
    },
    {
      title: "Tears of Steel - Libre Expresión",
      url: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4",
      thumbnail: "https://mango.blender.org/wp-content/uploads/2012/03/tears-of-steel-poster.jpg",
      type: "video"
    }
  ];

  const videoPlayer = document.getElementById("video-player");
  const iframePlayer = document.getElementById("iframe-player");
  const currentTitle = document.getElementById("current-title");
  const videoGrid = document.getElementById("video-grid");

  function playVideo(index) {
    const video = videos[index];
    currentTitle.textContent = video.title;

    if (video.type === "youtube") {
      videoPlayer.style.display = "none";
      videoPlayer.pause();
      iframePlayer.style.display = "block";
      iframePlayer.src = video.url + "?autoplay=1&rel=0";
    } else {
      iframePlayer.style.display = "none";
      iframePlayer.src = "";
      videoPlayer.style.display = "block";
      videoPlayer.src = video.url;
      videoPlayer.play();
    }
  }

  // Resto del código de creación de cards, carga y búsqueda igual

  function createVideoCard(video, index) {
    const card = document.createElement("div");
    card.className = "video-card";
    card.onclick = () => playVideo(index);

    const thumb = document.createElement("img");
    thumb.className = "thumbnail";
    thumb.src = video.thumbnail;
    thumb.alt = video.title;

    const title = document.createElement("div");
    title.className = "video-title";
    title.textContent = video.title;

    card.appendChild(thumb);
    card.appendChild(title);
    return card;
  }

  function loadVideos(filter = "") {
    videoGrid.innerHTML = "";
    videos.forEach((video, i) => {
      if (video.title.toLowerCase().includes(filter.toLowerCase())) {
        const card = createVideoCard(video, i);
        videoGrid.appendChild(card);
      }
    });
  }

  document.getElementById("searchInput").addEventListener("input", e => {
    loadVideos(e.target.value);
  });

  window.onload = () => {
    loadVideos();
    playVideo(0);
  };
</script>
